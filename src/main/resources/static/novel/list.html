<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta name="viewport" charset="UTF-8" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>章节列表</title>
</head>
<style>
    .container {
        width: 100%;
    }

    .row-header {
        text-align: center;
        margin: 2% 0 1% 0;
    }
</style>
<body>
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 col-lg-12 column">
            <h3>名称</h3>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">章节列表</h4>
                </div>
                <div class="panel-body">
                    <dl></dl>
                </div>
                <div class="panel-foot"></div>
            </div>
            <ul class="pagination">
                <li><a href="#">Prev</a></li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#">Next</a></li>
            </ul>
        </div>
    </div>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../js/common.js"></script>
<script>
    var novelName = getUrlValue("novelName");
    var novelCode = getUrlValue("novelCode");
    $(function () {
        $("h3").text(novelName);
        getNovelChapterPage(1, 20, 0);
    });

    function getNovelChapterPage(pageNo, pageSize, orderType) {
        $.ajax({
            url: "/novel/" + novelCode + "/page/" + pageNo,
            type: "post",
            dataType: "json",
            data: {
                pageSize: pageSize,
                orderType: orderType
            },
            success: function (data) {
                var content = data.data.content;
                var contentHtml = "";
                console.log(content);
                content.forEach(function (value) {
                    contentHtml += '<dd><a href="detail.html">' + value.chapterName + '</a></dd>';
                });
                $(".panel-body dl").append(contentHtml);
            },
            error: function (XMLHttpRequest) {
                location.href = "../login.html";
            }
        })
    }
</script>
</html>